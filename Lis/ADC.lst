C51 COMPILER V9.52.0.0   ADC                                                               10/16/2018 11:42:09 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE ADC
OBJECT MODULE PLACED IN .\Obj\ADC.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Application\Source\ADC.c LARGE BROWSE INCDIR(.\Application\Header) DEBUG
                    - OBJECTEXTEND PRINT(.\Lis\ADC.lst) TABS(2) OBJECT(.\Obj\ADC.obj)

line level    source

   1          
   2          #include "ADCh.h"
   3          #include "stc15f2k60s2.h"
   4          void ADC_Init(void)
   5          {
   6   1        // P1.0 is input
   7   1        P1M1 |=( 1<<0);  
   8   1        P1M0 &=~( 1<<0); 
   9   1        
  10   1        P1ASF |=P1_0_ADC_FUNCTION;  
  11   1          
  12   1        ADC_RES=0;        
  13   1                
  14   1        ADC_CONTR=ADC_PWR;  //enable ADC power  
  15   1        //Delay_ms(2);     
  16   1      }
  17          
  18          
  19          unsigned int ADC_GetResult(unsigned char ch) // unsigned int is 16 bit data
  20          {
  21   1        unsigned int ADC_Value;
  22   1        ADC_CONTR =ADC_PWR  | ch | ADC_START; 
  23   1      //  _nop_();                     
  24   1       // _nop_();
  25   1       // _nop_();
  26   1       // _nop_();
  27   1        while (!(ADC_CONTR & ADC_FLAG));
  28   1        ADC_CONTR &= ~ADC_FLAG;         
  29   1        ADC_Value=ADC_RES;              
  30   1        ADC_Value=(ADC_Value<<2)|ADC_RESL;
  31   1        return ADC_Value;                   
  32   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     50    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
